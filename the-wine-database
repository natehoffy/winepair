-- ------------------------------------
-- Create the database with db_name = Wine
-- ------------------------------------

CREATE DATABASE IF NOT EXISTS 'Wine';

-- --------------------------------------------------
-- Create the Colors table
-- --------------------------------------------------

DROP TABLE IF EXISTS Colors;

CREATE TABLE Colors (
	Color_Code INT NOT NULL,
	Color_Name VARCHAR(4) NOT NULL,
	
	PRIMARY KEY(Color_Code)
);

# DESCRIBE Colors;

-- ----------------------------------------------------------------------------------------------
-- Creating the Vintage Table
-- ----------------------------------------------------------------------------------------------

DROP TABLE IF EXISTS Vintage;

CREATE TABLE IF NOT EXISTS Vintage (
	Vintage_Year CHAR(4) NOT NULL,
	
	PRIMARY KEY(Vintage_Year)
);

# DESCRIBE Vintage;

-- ----------------------------------------------------------------------------------------------
-- Creating the Food Table
-- ----------------------------------------------------------------------------------------------

DROP TABLE IF EXISTS Food;

CREATE TABLE IF NOT EXISTS Food (
	Food_Code INT NOT NULL,
	Food_Name VARCHAR(50) NOT NULL,
	Food_Type VARCHAR(50),
	
	PRIMARY KEY(Food_Code)
);

# DESCRIBE FOOD;

-- ----------------------------------------------------------------------------------------------
-- Creating the Occassion Table
-- ----------------------------------------------------------------------------------------------

DROP TABLE IF EXITS Occassion;

CREATE TABLE IF NOT EXISTS Occassion (
	Occassion_Code INT NOT NULL,
	Occassion_Name VARCHAR(50),
	Occassion_Type VARCHAR(50) NOT NULL,
	
	PRIMARY KEY(Occassion_Code)
);

# DESCRIBE Occassion;

-- ----------------------------------------------------------------------------------------------
-- Creating the Country Table
-- ----------------------------------------------------------------------------------------------

DROP TABLE IF EXISTS Country;

CREATE TABLE IF NOT EXISTS Country (
	Country_Code_Num INT NOT NULL,
	Country_Code_Alpha2 CHAR(2) NOT NULL,
	Country_Code_Alpha3 CHAR(3) NOT NULL,
	Country_Name VARCHAR(50) NOT NULL,
	
	PRIMARY KEY(Country_Code_Num)
);

# DESCRIBE Country;

-- ----------------------------------------------------------------------------------------------
-- Creating the Appellation Table
-- ----------------------------------------------------------------------------------------------

-- ---------------------------------------
-- Code below here isn't currently working
-- ---------------------------------------

DROP TABLE IF EXISTS Appellation;

CREATE TABLE IF NOT EXISTS Appellation (
	Appellation_Code VARCHAR(100) NOT NULL,
	Appellation_Name VARCHAR(100) NOT NULL,
	Country_Code_Num INT NOT NULL,
	Country_Code_Alpha2 CHAR(2) NOT NULL,
	Country_Code_Alpha3 CHAR(3) NOT NULL,
	
	PRIMARY KEY (Appellation_Code),
	
	FOREIGN KEY (Country_Code_Num)
		REFERENCES Country (Country_Code_Num)
		ON UPDATE CASCADE ON DELETE RESTRICT,
		
	FOREIGN KEY (Country_Code_Alpha2)
		REFERENCES Country (Country_Code_Alpha2)
		ON UPDATE CASCADE ON DELETE RESTRICT,
		
	FOREIGN KEY (Country_Code_Alpha3)
		REFERENCES Country (Country_Code_Alpha3)
		ON UPDATE CASCADE ON DELETE RESTRICT
);
